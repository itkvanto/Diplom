## Всем привет! Добро пожаловать в репозиторий дипломного проекта! ![](https://github.com/blackcater/blackcater/raw/main/images/Hi.gif) 
### Целью проекта было создание Telegram-бота для изучения английского языка

#### В результате выполнения были реализованы все требуемые задачи, а именно 
1. разработать программу-бота на Python
2. спроектировать и реализовать базу данных (БД) для программы
3. настроить взаимодействие бота с Yandex API
4. написать документацию по использованию программы.

## Документация
#### Проект разбит на 3 модуля

1. main.py - основная программа, работа с ботом
2. translation.py - функции по переводу слов и поиску примеров 
3. database.py - работа с базой данных PostgreSQL

## main.py
#### В данном модуле реализуется вся работа с ботом. Разработано 5 команд:

1. /start - стартовая команда при первом запуске бота
2. /game - команда запуска тестирования
3. /exit - команда выхода из тестирования
4. /add_word - команда добавления слов
5. /delete_word - команда удаления слов

### /start
#### При вызове этой команды вызывается соответсвующая функция start, которая совершает инциализацию: 

1. Создает таблицу для пользователя
2. Заполняет ее общим набором слов
3. Определяет шаг 0
4. Задает вопрос

### /game
#### При вызове этой команды вызывается соответсвующая функция game, которая определяет шаг 0 и задает вопрос.
#### Когда задается вопрос вызывается функция ask_question, которая ищет случайное слово в БД и берет всю необходимую информацию, а также еще 3 случайных слова. Добавляет эти слова на кнопки и показывает пользователю 
#### с надписью "Выбери перевод слова:". При нажатии на любую из 4 кнопок, вызывается функция проверки ответа, она сравнивает ответ и если пользователь ответил правильно, дает пример использования этого слова. Если пользователь ввел в этот момент /exit, то тестирование закончится. Если ответ неверный, то пользователь может попробовать еще раз

### /add_word
#### При вызове этой команды вызывается соответсвующая функция add_word_command, которая определяет шаг 1, просит пользователя ввести слово и отправляет на следующий шаг.
#### Функция save_new_word активируется когда мы определили шаг в 1. В ней записывается слово пользователя без лишних пробелов и в нижнем регистре, определяется перевод и пример использования. Далее добавляется в БД.

### /delete_word
#### При вызове этой команды вызывается соответсвующая функция delete_word_command, которая определяет шаг 2, просит пользователя ввести слово и отправляет на следующий шаг.
#### Функция save_new_word активируется когда мы определили шаг в 2. В ней записывается слово пользователя без лишних пробелов и в нижнем регистре и удаляется из БД.

## database.py
#### В данном модуле реализуется вся работа с базой данных.
#### Таблица в базе данных для каждого пользователя выглядит следующим образом.

![image](https://github.com/itkvanto/Diplom/assets/104899600/22bf0fe6-185a-4929-baa2-35a561536e72)

### Реализованные функции
1. connect_database - подключение к базе
2. create_words_table - создание таблицы для пользователя
3. fill_database_with_common_words - заполнение базовыми словами
4. get_random_word - получение случайного слова из бд
5. add_word - добавление слова
6. delete_word - удаление слова
7. get_word_by_text - получение всей информации по слову
8. get_word_count - получение количества слов

## translation.py
#### В данном модуле реализуется вся работа с API.

### Реализованные функции
1. get_word_translation - получение перевода слова через Yandex Translate
2. get_word_example - получение примера использования слова через dictionaryapi

# Инструкция по использованию
### В первую очерердь вам необходимо:
1. Cоздать бота и получить его токен через @BotFather
2. Токен добавляете в переменную token_bot в main.py
3. Получить IAM токен через Yandex Cloud, для этого вам необходимо завести аккаунт, привязать банковскую карту и после этого вам дадут грант на использование почти всех сервисов Yandex Cloud.
4. Также необходимо узнать id вашего облака в личном кабинете Yandex Cloud
5. Как получили IAM токен и id, добавляем их в translation.py в переменные IAM_TOKEN и folder_id соответсвенно.
6. Для реализации базы данных вам необходимо создать базу данных PostgreSQL и вставить название бд, логин и пароль в файл database.py в переменные db_name, db_user и db_password соответсвенно.

